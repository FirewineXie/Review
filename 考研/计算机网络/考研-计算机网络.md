# Table of Contents

* [考研-计算机网络](#考研-计算机网络)
  * [（一） 概述](#（一）-概述)
    * [1.1 计算机网络在信息时代中的作用](#11-计算机网络在信息时代中的作用)
    * [1.2 因特网概述](#12-因特网概述)
      * [1.2.1 网络的网络（计算机网络的概念）](#121-网络的网络（计算机网络的概念）)
      * [1.2.2 因特网发展的三个阶段](#122-因特网发展的三个阶段)
      * [1.2.3 因特网的标准化工作](#123-因特网的标准化工作)
    * [1.3 因特网的组成](#13-因特网的组成)
      * [1.3.1 因特网的边缘部分](#131-因特网的边缘部分)
      * [1.3.2 因特网的核心部分](#132-因特网的核心部分)
    * [1.4 计算机在我国的发展](#14-计算机在我国的发展)
    * [1.5 计算机网络的类别](#15-计算机网络的类别)
      * [1.5.1 计算机网络的定义](#151-计算机网络的定义)
      * [1.5.2 计算机的分类](#152-计算机的分类)
    * [1.6 计算机网络的性能](#16-计算机网络的性能)
      * [1.6.1 计算机网络的性能指标](#161-计算机网络的性能指标)
      * [1.6.2 计算机网络的非性能指标](#162-计算机网络的非性能指标)
    * [1.7 计算机网络体系结构](#17-计算机网络体系结构)
      * [1.7.1 计算机网络体系结构的形成](#171-计算机网络体系结构的形成)
      * [1.7.2 协议与划分层次](#172-协议与划分层次)
      * [1.7.3 具有五层协议的体系结构](#173-具有五层协议的体系结构)
      * [1.7.4 实体、协议、服务和服务访问点](#174-实体、协议、服务和服务访问点)
  * [（二）物理层](#（二）物理层)
    * [2.1 物理层基本概念](#21-物理层基本概念)
    * [2.2 数据通信的基础知识](#22-数据通信的基础知识)
      * [2.2.1 基本概念](#221-基本概念)
      * [2.2.2 有关信道的基本概念](#222-有关信道的基本概念)
      * [2.2.3 信道的极限容量](#223-信道的极限容量)
    * [2.3 物理层下的传输媒体](#23-物理层下的传输媒体)
      * [2.3.1 导引型传输媒体：实时存在的线](#231-导引型传输媒体：实时存在的线)
      * [2.3.2 非导引型传输媒体](#232-非导引型传输媒体)
    * [2.4 信道复用技术](#24-信道复用技术)
      * [2.4.1 频分复用、时分复用和统计时分复用](#241-频分复用、时分复用和统计时分复用)
        * [1. 频分复用FDM](#1-频分复用fdm)
        * [2. 时分复用TDM](#2-时分复用tdm)
        * [3. 统计时分复用STDM](#3-统计时分复用stdm)
      * [2.4.2 波分复用WDM ：就是光的频分复用](#242-波分复用wdm-：就是光的频分复用)
      * [2.4.3 码分复用CDM](#243-码分复用cdm)
    * [2.5 数字传输系统](#25-数字传输系统)
    * [2.6 宽带接入技术（有线宽带接入）](#26-宽带接入技术（有线宽带接入）)
      * [2.6.1 ADSL 技术](#261-adsl-技术)
      * [2.6.2 光纤同轴混合网（HFC网）](#262-光纤同轴混合网（hfc网）)
      * [2.6.3 FTTx技术](#263-fttx技术)
  * [（三）数据链路层](#（三）数据链路层)
    * [3.1 使用点对点信道的数据链路层](#31-使用点对点信道的数据链路层)
      * [3.1.1 数据链路和帧](#311-数据链路和帧)
      * [3.1.2 基本问题（功能）](#312-基本问题（功能）)
        * [1. 封装成帧](#1-封装成帧)
        * [2. 透明传输](#2-透明传输)
        * [3. 差错检测](#3-差错检测)
        * [4. 流量控制（确认和重传机制）--不重要仅了解](#4-流量控制（确认和重传机制）--不重要仅了解)
    * [3.2 点对点协议PPP](#32-点对点协议ppp)
      * [3.2.1 PPP协议的特点](#321-ppp协议的特点)
        * [1. p2p协议的组成](#1-p2p协议的组成)
      * [3.2.2 P2P协议的帧格式](#322-p2p协议的帧格式)
        * [1. 各字段的意义](#1-各字段的意义)
        * [2. 字符填充问题](#2-字符填充问题)
        * [3. 零比特填充](#3-零比特填充)
      * [3.2.3 ppp协议的工作状态](#323-ppp协议的工作状态)
    * [3.3 使用广播信道的数据链路协议](#33-使用广播信道的数据链路协议)
      * [3.3.1 局域网的数据链路层](#331-局域网的数据链路层)
      * [3.3.2 CSMA/CD 协议](#332-csmacd-协议)
    * [3.4 使用广播信道的以太网](#34-使用广播信道的以太网)
      * [3.4.1 传统以太网](#341-传统以太网)
        * [1. MAC层连接方式](#1-mac层连接方式)
        * [2. 以太网的连接距离](#2-以太网的连接距离)
        * [3. 集线器](#3-集线器)
      * [3.4.2 以太网的信道利用率](#342-以太网的信道利用率)
      * [3.4.3 以太网的MAC层](#343-以太网的mac层)
        * [1. 以太网的MAC地址](#1-以太网的mac地址)
        * [2. MAC帧格式](#2-mac帧格式)
        * [3. 无效的MAC帧](#3-无效的mac帧)
        * [4. 帧间最小间隔](#4-帧间最小间隔)
    * [3.5 扩展的以太网](#35-扩展的以太网)
      * [3.5.1 在物理层扩展以太网](#351-在物理层扩展以太网)
        * [1. 优点：](#1-优点：)
        * [2. 缺点：](#2-缺点：)
      * [3.5.2 在数据链路层扩展以太网](#352-在数据链路层扩展以太网)
        * [1. 优点](#1-优点)
        * [2. 缺点](#2-缺点)
        * [3. 网桥的运行过程](#3-网桥的运行过程)
        * [4.  多端口网桥——==以太网交换机==](#4--多端口网桥以太网交换机)
          * [1. 特点：](#1-特点：)
        * [5. 虚拟局域网VLan](#5-虚拟局域网vlan)
      * [3.6 高速以太网](#36-高速以太网)
        * [3.6.1 100M以太网](#361-100m以太网)
        * [3.6.2 吉比特以太网](#362-吉比特以太网)
        * [1. 载波延伸](#1-载波延伸)
      * [2. 分组突发](#2-分组突发)
  * [（四） 网络层](#（四）-网络层)
      * [4.1 网络层提供的服务](#41-网络层提供的服务)
      * [4.2 IP协议](#42-ip协议)
        * [4.2.1 虚拟互联网络](#421-虚拟互联网络)
        * [4.2.2 分类的IP地址](#422-分类的ip地址)
          * [1. IP地址及其表示方式](#1-ip地址及其表示方式)
        * [4.2.3 IP地址与硬件地址](#423-ip地址与硬件地址)
        * [4.2.4 地址解析协议](#424-地址解析协议)
    * [4.3 划分子网和构成超网](#43-划分子网和构成超网)
        * [4.3.1 划分子网](#431-划分子网)
          * [1. 两级IP地址到 三级IP地址](#1-两级ip地址到-三级ip地址)
          * [2. 子网掩码](#2-子网掩码)
        * [4.3.3 无分类编址(构成抄网)](#433-无分类编址构成抄网)
          * [IP编址问题的演讲](#ip编址问题的演讲)
          * [CIDR 最主要的特点](#cidr-最主要的特点)
          * [路由聚合](#路由聚合)
          * [前缀最长匹配](#前缀最长匹配)
          * [使用二叉线索查找路由表](#使用二叉线索查找路由表)
    * [4.4 网际控制报文协议ICMP](#44-网际控制报文协议icmp)
        * [ICMP报文](#icmp报文)
    * [4.5 因特网的路由选择协议](#45-因特网的路由选择协议)
        * [4.5.1 有关路由选择协议的几个基本概念](#451-有关路由选择协议的几个基本概念)
          * [1. 理想的路由算法](#1-理想的路由算法)
          * [最佳路由](#最佳路由)
          * [从路由算法的自适应性考虑](#从路由算法的自适应性考虑)
          * [2. 分层次的路由选择协议](#2-分层次的路由选择协议)
          * [自治系统](#自治系统)
          * [因特网由两大类路由选择协议](#因特网由两大类路由选择协议)
        * [4.5.2 内部网关协议RIP](#452-内部网关协议rip)
          * [距离的定义](#距离的定义)
          * [RIP 协议的三个要点](#rip-协议的三个要点)
          * [路由表的定义](#路由表的定义)
          * [RIP 协议的位置](#rip-协议的位置)
        * [4.5.3 内部网关协议OSPF](#453-内部网关协议ospf)
          * [链路状态数据库](#链路状态数据库)
          * [OSPF 的区域](#ospf-的区域)
          * [OSPF 划分区域](#ospf-划分区域)
          * [OSPF 的其他特点](#ospf-的其他特点)
          * [OSPF 的五种分组类型](#ospf-的五种分组类型)
          * [OSPF 的其他特点](#ospf-的其他特点-1)
          * [指定的路由器](#指定的路由器)
          * [OSPF支持的三种网络的连接](#ospf支持的三种网络的连接)
          * [网络拓扑的表现形式](#网络拓扑的表现形式)
        * [4.5.4 外部网关协议BGP](#454-外部网关协议bgp)
          * [使用环境](#使用环境)
          * [BGP交换路由信息](#bgp交换路由信息)
          * [BGP发言人交换路径向量](#bgp发言人交换路径向量)
          * [BGP协议的特点：](#bgp协议的特点：)
          * [BGP-4 共使用四种报文](#bgp-4-共使用四种报文)
    * [4.6 IP多播](#46-ip多播)
        * [4.6.1 IP多播的基本概念](#461-ip多播的基本概念)
        * [4.6.2 在局域网上进行硬件多播](#462-在局域网上进行硬件多播)
        * [4.6.3 网际组管理协议IGMP和多播路由选择协议](#463-网际组管理协议igmp和多播路由选择协议)
          * [1. IP多播两种协议](#1-ip多播两种协议)
          * [2. IGMP的两个阶段](#2-igmp的两个阶段)
          * [3. 多播路由选择协议](#3-多播路由选择协议)
        * [4.7 虚拟专用网VPN和网络地址转换NAT](#47-虚拟专用网vpn和网络地址转换nat)
          * [4.7.1 虚拟专用网VPN](#471-虚拟专用网vpn)
          * [4.7.2 网络转换协议NAT](#472-网络转换协议nat)
  * [（五）运输层](#（五）运输层)
    * [5.1 运输层协议概述](#51-运输层协议概述)
      * [5.1.1 进程间的通信](#511-进程间的通信)
          * [运输层协议和网络层协议的主要区别：](#运输层协议和网络层协议的主要区别：)
      * [5.1.2 运输层的两个主要协议](#512-运输层的两个主要协议)
          * [运输层向上提供可靠的和不可靠的逻辑通信信道](#运输层向上提供可靠的和不可靠的逻辑通信信道)
      * [5.1.3 运输层的端口](#513-运输层的端口)
          * [两类端口](#两类端口)
          * [插口](#插口)
    * [5.2 用户数据报协议](#52-用户数据报协议)
      * [5.2.1 UDP概述](#521-udp概述)
    * [5.3  传输控制协议TCP概述](#53--传输控制协议tcp概述)
      * [5.3.1 TCP最主要的特点](#531-tcp最主要的特点)
    * [5.4 可靠传输的工作原理](#54-可靠传输的工作原理)
      * [5.4.1 停止等待协议](#541-停止等待协议)
        * [1. 无差错情况](#1-无差错情况)
        * [2. 出现差错](#2-出现差错)
        * [3. 确认丢失和确认迟到](#3-确认丢失和确认迟到)
        * [4. 信道利用率](#4-信道利用率)
      * [5.4.2 连续ARQ协议](#542-连续arq协议)
    * [5.5 TCP 报文段的首部部分](#55-tcp-报文段的首部部分)
    * [5.6 TCP可靠传输的实现](#56-tcp可靠传输的实现)
      * [5.6.1 以字节为单位的滑动窗口](#561-以字节为单位的滑动窗口)
      * [5.6.2 超时重传时间的选择](#562-超时重传时间的选择)
      * [5.6.3 选择确认SACK](#563-选择确认sack)
    * [5.7 TCP 的流量控制](#57-tcp-的流量控制)
        * [5.7.1 利用滑动窗口实现流量控制](#571-利用滑动窗口实现流量控制)
        * [5.7.2 必须考虑传输速率](#572-必须考虑传输速率)
          * [Nagle算法](#nagle算法)
          * [糊涂窗口综合征](#糊涂窗口综合征)
    * [5.8 TCP 的拥塞控制](#58-tcp-的拥塞控制)
          * [拥塞控制和流量控制](#拥塞控制和流量控制)
          * [闭环控制措施](#闭环控制措施)
      * [5.8.2 几种拥塞控制方法](#582-几种拥塞控制方法)
    * [5.9 TCP的运输连接管理](#59-tcp的运输连接管理)
          * [客户服务器方式](#客户服务器方式)
      * [5.9.1 用三次握手建立TCP连接](#591-用三次握手建立tcp连接)
      * [5.9.2 TCP 的链接释放](#592-tcp-的链接释放)
      * [5.9.3 TCP 的有限状态机](#593-tcp-的有限状态机)
  * [（六） 应用层](#（六）-应用层)
    * [6.1 域名系统](#61-域名系统)
      * [6.1.1 域名系统概述](#611-域名系统概述)
      * [6.1.2 因特网的域名结构](#612-因特网的域名结构)
      * [6.1.3 域名服务器](#613-域名服务器)
          * [域名服务器分类：](#域名服务器分类：)
          * [名字的高速缓存](#名字的高速缓存)
    * [6.2 文件传输协议](#62-文件传输协议)
      * [6.2.1 FTP概述](#621-ftp概述)
      * [6.2.2 FTP 的基本工作原理](#622-ftp-的基本工作原理)
          * [网络环境下复制文件的复杂性：](#网络环境下复制文件的复杂性：)
          * [FTP特点：](#ftp特点：)
          * [主进程的工作步骤](#主进程的工作步骤)
          * [两个连接](#两个连接)
          * [两个不同的端口号](#两个不同的端口号)
      * [6.2.3 简单文件传送协议TFTP](#623-简单文件传送协议tftp)
    * [6.3 远程终端协议TELNET](#63-远程终端协议telnet)
          * [客户服务器方式](#客户服务器方式-1)
          * [TELNET 使用网络虚拟终端NVT格式](#telnet-使用网络虚拟终端nvt格式)
    * [6.4 万维网WWW](#64-万维网www)
      * [6.4.1 万维网概述](#641-万维网概述)
          * [万维网提供分布式服务](#万维网提供分布式服务)
          * [超媒体与超文本](#超媒体与超文本)
          * [万维网的工作方式](#万维网的工作方式)
          * [万维网必须解决的问题](#万维网必须解决的问题)
      * [6.4.2 统一资源定位符URL](#642-统一资源定位符url)
        * [1. URL的格式](#1-url的格式)
      * [6.4.3超文本传送协议HTTP](#643超文本传送协议http)
        * [1. HTTP的操作流程](#1-http的操作流程)
          * [万维网的工作流程](#万维网的工作流程)
        * [2. 代理服务器](#2-代理服务器)
          * [使用高速缓存可减少访问因特网服务器的时延](#使用高速缓存可减少访问因特网服务器的时延)
        * [4. HTTP的报文结构](#4-http的报文结构)
          * [状态码三位数字](#状态码三位数字)
        * [5. 在服务器上存放用户信息](#5-在服务器上存放用户信息)
        * [6. 通用网关接口CGI](#6-通用网关接口cgi)
        * [7、 活动万维网文档](#7、-活动万维网文档)
    * [6.5 电子邮件](#65-电子邮件)
      * [6.5.2 简单邮件传送协议SMTP](#652-简单邮件传送协议smtp)
          * [POP和IMAP 是负责接收的](#pop和imap-是负责接收的)
    * [6.6 动态主机配置协议DHCP](#66-动态主机配置协议dhcp)
          * [DHCP 使用客户服务器方式](#dhcp-使用客户服务器方式)
          * [DHCP 中继代理](#dhcp-中继代理)
    * [6.7 简单网络管理协议SNMP](#67-简单网络管理协议snmp)
      * [6.7.1 网络管理的基本概念](#671-网络管理的基本概念)
          * [OSI 的五个管理功能于](#osi-的五个管理功能于)
      * [6.7.2 管理信息结构SMI](#672-管理信息结构smi)
    * [6.8 应用进程跨越网络的通信](#68-应用进程跨越网络的通信)
  * [（七） 网络安全](#（七）-网络安全)
    * [7.1 网络安全概述](#71-网络安全概述)
      * [7.1.1 计算机网络面临的安全威胁](#711-计算机网络面临的安全威胁)
          * [面临四种威胁](#面临四种威胁)
          * [计算机网络通信安全的目标](#计算机网络通信安全的目标)
          * [恶意程序](#恶意程序)
      * [7.1.2 计算机网络安全的内容](#712-计算机网络安全的内容)
      * [7.1.3 一般的数据加密模型](#713-一般的数据加密模型)
    * [7.2 两类密码体制](#72-两类密码体制)
      * [7.2.1 对称密钥密码体制](#721-对称密钥密码体制)
          * [DES](#des)
    * [7.3 数字前面](#73-数字前面)
          * [数字签名必须保证以下三点：](#数字签名必须保证以下三点：)
  * [（八） 互联网行的音频和视频服务](#（八）-互联网行的音频和视频服务)
    * [1. RTP、RTCP、Qos等的概念](#1-rtp、rtcp、qos等的概念)
    * [2.  时延、时延抖动等的处理](#2--时延、时延抖动等的处理)
    * [3. WLan、WPan、WMan、WLL的概念](#3-wlan、wpan、wman、wll的概念)
    * [4. 无线局域网的DCF和PCF](#4-无线局域网的dcf和pcf)
    * [5. CSMA/CA协议的原理](#5-csmaca协议的原理)
  * [（九） 下一代因特网](#（九）-下一代因特网)
    * [1. IPv6的特点](#1-ipv6的特点)
    * [2. P2P技术的特点](#2-p2p技术的特点)
    * [3. 标记交换原理](#3-标记交换原理)
    * [4.  MPLS的封装](#4--mpls的封装)
    * [5.  标记分配的方式](#5--标记分配的方式)
    * [6. 与以路由器作为核心网络平台的技术相比，MPLS的主要优点](#6-与以路由器作为核心网络平台的技术相比，mpls的主要优点)
    * [7.  Intserv的局限性](#7--intserv的局限性)
    * [8. DiffServ的体系结构](#8-diffserv的体系结构)
    * [9. DiffServ的技术特点](#9-diffserv的技术特点)



# 考研-计算机网络

## （一） 概述

### 1.1 计算机网络在信息时代中的作用

1. 三网融合汇总的“三网” 是指电信网络、有线电视网络和计算机网络
2. 计算机网络提供的功能包括连通性（信息交互）和资源（信息，软件，硬件）共享。

### 1.2 因特网概述

####  1.2.1 网络的网络（计算机网络的概念）

​			网络是把许多计算机物理设备连接在一起，通过软件完成网络信息的交互。而因特网把多个网络连接在一起实现信息交互。

#### 1.2.2 因特网发展的三个阶段

#### 1.2.3 因特网的标准化工作

1. 标准组织： 因特网协会，协议开发技术组织，
2. 标准制定 : 都是以RFC形式
   1. 制定阶段 ： 因特网草案，建议标准，草案标准，因特网标准

### 1.3 因特网的组成

重点：

1. 因特网的组成

2. 主机的连接方式

3. 通信方式

   因特网 的==拓扑结构==可以划分为以下的两大块：边缘部分由所有连接在因特网上的主机组用来进行通信（传送数据、音频或视频） 和资源共享；核心部分由大量网络和连接这些网络的路由器组成提供服务的（提供连通性和交换）

#### 1.3.1 因特网的边缘部分

​		边缘部分是指因特网上的所有主机。计算机之间的通信是指”主机A的某个进程和主机B上的另一个进程进行通信“

 1.  通信方式

     网络边缘的通信方式通常分为两类：客服-服务器方式（CS），对等方式（P2P）

	2. 客户-服务器模式

        	1. 通信模式

        客户和服务器是服务和被服务的关系。

        	2. 通信特点

        客户程序 ： 不需要特殊的硬件和操作系统

        服务器程序：提供专门的服务，一直运行被动的同时接受多个客户的服务请求，需要强大的硬件和操作系统

	3. 对等连接方式(P2P)

        	1. 通信模式

           ​	两个主机都运行了对等连接软件，他们就可以进行平等的、对等连接通信
        
           2. 通信特点
           
              对等的每一个主机即是客户又是服务器

#### 1.3.2 因特网的核心部分

​		向网络边缘中的大量主机提供连通性。关键构件是路由器。提供方式：==电路交换，报文交换和分组交换==

1. 电路交换

   必须经过“建立连接（占用通信资源）——通话 （一直占用通信资源）——释放连接（归还通信资源）” 三个步骤的交换方式

   通信过程中 两个用户始终占用端到端的通信资源

2. 报文交换

   要发送的整块数据成为一个“报文”通过路由转发

3. 分组交换

   分组交换技术采用存储转发的方式，把报文划分成一个个更小的等长的数据段

   分组交换的原理：

   ​		在发送端，先把较长的报文划分成较短的、固定长度的数据段。

   分组交换的特点：

   1.  高效
   
     		2.  灵活
                   		
        		3.  迅速
        		4.  可靠

### 1.4 计算机在我国的发展

### 1.5 计算机网络的类别

#### 1.5.1 计算机网络的定义

​		计算机网络的最简单的定义是：一些互相连接的、自治的计算机的集合。

​		自治 —— 即独立的计算机，他有自己的硬件和软件，可以单独运行使用

​		互相连接——是指计算机之间能够进行数据通信或交换信息

#### 1.5.2 计算机的分类

​		按作用范围分为广域网、城域网、局域网、个人区域网

​		按使用者分为：公用网，专用网

​		特殊功能： 接入网。

1. 按网络作用范围分
   1. 广域网：例如 移动
   2. 城域网：城市之间
   3. 局域网：校园网
   4. 个人区域网：路由器连接的
2. 按使用者分为：
   1. 公用网 ： 电信公司
   2. 专用网： 某个部分专用的
3. 接入网
   1. 是从某个端系统到另一个端系统的路径中
   2. ![1568877866669](img/1568877866669.png)

​        

### 1.6 计算机网络的性能

#### 1.6.1 计算机网络的性能指标

1. 速率

   计算机网络上主机在数字信道上传送数据的速率，也称为数据率

2. 宽带

   网络带宽表示在单位时间内从网络中的某一个点到另一点所能通过的**最高数据率**

3. 吞吐量

   吞吐量表示在单位时间内通过某个网络（或信道、接口）的数据量

4. 时延

   时延是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间

   1. 发送时延

      主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的第一个比特算起，到该帧最后一个比特发送完毕所需的时间

   2. 传播时延

      电磁波在信道中传播一定的举例需要花费的时间

   3. 处理时延

      主机或路由器在收到分组时要花费一定的时间进行处理

   4. 排队时延

      分组在进入路由器后要先在输入队列中排队，等待处理。排队时延的长短往往取决于网络当时的通信量

   5. 总时延 = 上面四个想加

   6. 时延带宽积

      把传播时延和带宽——相乘，就得到另一个很有用的度量：传播时延带宽积，即：

      ​	时延带宽积=传播时延* 带宽

   7. 往返时间

      从发送方发送数据开始，带发送方收到来自接收方的确认总共经历的时间

   8. 利用率

      1. 信道利用率

         信道利用率指出某信到有百分之几的时间是被利用的（有 数据通过）

      2. 网络利用率

         网络利用率则是全网络的信道利用率的加权平均值。信道利用率并非越高越好

         ![1568878860743](img/1568878860743.png)

         ![1568878890767](img/1568878890767.png)

#### 1.6.2 计算机网络的非性能指标

​		费用，质量，标准化，可靠性，可扩展性和可升级性，易于管理和维护

### 1.7 计算机网络体系结构

#### 1.7.1 计算机网络体系结构的形成

​		将复杂的计算机网络，转化成各个小部分 

#### 1.7.2 协议与划分层次

​		我们把计算机网络的各层及其协议的集合，称为网络的体系结构

  		1. 网络协议主要由以下三个要素组成：
         		1. 语法 ： 即数据与控制信息的结构或格式
         		2. 语义：即需要发出何种控制信息，完成何种动作以及做出何种响应
         		3. 同步：即事件实现顺序的详细说明

#### 1.7.3 具有五层协议的体系结构

​		OSI的七层协议体系结构，TCP/IP是一个四层的体系结构。

​		五层是综合OSI和TCP/IP的优点：

​		边缘部分： 

​		核心部分： 只占用 网络层

​		![层次结构](img/层次机构.png)

  		1. 应用层：
         		1. 功能 ： 应用层的任务是通过应用进程间的交互来万恒特定网络应用
         		2. 代表协议： HTTP,SMTP,FTP
		2. 运输层：
          		1. 功能：运输层的任务就是负责向两个主机中进程之间的通信提供通用的数据传输服务
          		2. 代表协议：传输控制协议，用户数据报协议
          		3. 数据传输单位：用户数据报
		3. 网络层
          		1. 功能： 网络层负责为分组交换网上的主机 提供通信服务。将运输层的报文段或用户数据报分装成分组或包进行传送。另一个任务是： 要选择合适的路由，使源主机运输层所传下来的分组能够通过网络中的路由器找到目的主机。
          		2. 代表协议：IP
          		3. 数据传输单位： 分组，包
		4. 数据链路层
          		1. 功能： 在两个相邻结点之间传送数据，数据链路层将网络层交下来的IP数据报组装成帧，在两个相邻结点间的链路上传送帧，
          		2. 单位：帧
		5. 物理层
          		1. 单位是比特
		6. ![](img/数据传送格式.png)

#### 1.7.4 实体、协议、服务和服务访问点

1. 实体表时任何可发送或接受信息的硬件或软件工程
2. 协议是控制两个对等实体进行通信的规则的集合
3. 在协议的控制下，两个对等实体间的通信使的本层能够向上一层提供服务
4. 要实现本层协议，还需要使用下层所提供的服务

## （二）物理层

### 2.1 物理层基本概念

​		物理层的主要任务描述为确定与传输媒体的接口的一些特性：

			1. 机械特性 ： 指明接口所用接线器的形状和尺寸，等等
   			2. 电气特性：电压范围
            			3. 功能特性：某条线上出现的某一电平的电压表示意义
                  			4. 过程特性：指明不同功能的各种可能事件的出现顺序

### 2.2 数据通信的基础知识

​		一个数据通信系统可划分为三大部分 ，即源系统、传输系统和目的系统。

#### 2.2.1 基本概念

1. 数据 ——运送信息的实体
2. 信号——数据的电气的或电磁的表现
3. 模拟的——连续变化的
4. 数字的——取值是离散数值
5. 调制——把数字信号转换为模拟信息的过程
6. 解调——把模拟信号转换为数字信息的过程

#### 2.2.2 有关信道的基本概念

1. 单向通信（单工通信）——只能有一个方向的通信而没有反方向的交互
2. 双向交替通信（半双工通信）——同行的双方都可以发送信息，但不能双方同时发送（也不能同时接收）
3. 双向同时通信（全双工通信）—— 通信的双方可以同时发送和接收信息
4. 基带信号 ： 就是将数字信号1 或0 直接用两种不同的电压来表示，然后送到线路上去传输
5. 宽带信号：是将基带信号进行调制后形成的频分复用模拟信号
6. 调制：来自信源的信号为基带信号
   1. 基带调制：
   
   2. 带通调制
      1. 调幅
      2. 调频
      3. 调相
      
   3. 常用的编码方式
   
      1. 不归零制： 正电平代表1，负电平代表0
   
      2. 归零制： 正脉冲代表1，负脉冲代表0
   
      3. ==曼彻斯特编码==：位周期中心的向上跳变代表0，位周期中心的向下跳变代表1。但也可以反过来定义
   
      4. ==差分曼彻斯特编码==：在每一位的中心处时钟都有跳变。位开始边界有跳变代表0，而位开始边界没有跳变代表1.
   
         ![1568973484165](img/1568973484165.png)
   
      ![1568973455003](img/1568973455003.png)
7. 码元传输 ： 码元传输的速率越高，或信号传输的距离越远，或噪声干扰越大，在接收端的波形的失真就越严重

#### 2.2.3 信道的极限容量

1. 信噪比

   噪声会使接收端对码元的判断错误

   信噪比就是 信号的平均功率和噪声的平均功率之比，常记为S/N,并用分贝作为 单位

   $信噪比 = 10log_{10}(S/N)$db

2. 奈奎斯特定理

   1.  ==在任何信道中，码元传输速率是有上限的，传输速率超过此上限，就会出现严重的码间串扰的问题，是接收端对码元的判决称为不可能==

3. 香农公式： 推导出带宽受限且有高斯白噪声干扰的信道的极限，无差错的信息传输速率

   ​	$C = W log_2(1+S/N)$   单位(b/s)

   ​	w 为信道的带宽

   ​	s为信道内所传信号的平均功率

   ​	n为信道内部的高斯噪声功率

3. 提高数据传输速率的方法
   
   1. 将 而二进制的基带信号，可以通过十进制去传输



### 2.3 物理层下的传输媒体

​			分为 导引型传输媒体和非导引型传输媒体

####  2.3.1 导引型传输媒体：实时存在的线

包括双绞线、同轴电缆和光缆

1. 双绞线：具有一定的抗干扰
2. 同轴电缆 ： 具有更好的抗干扰特性
3. 光缆： 利用光导纤维传递光脉冲
   1. 具有的优点：
      - 通信容量非常大
      - 传输损耗小，中继距离长，对远距离传输特别经济
      - 抗雷电和电磁干扰性能好。
      - 无串音干扰，保密性好，也不易被窃听或截取数据
      - 体积小、重量轻
   2. 按照传播模式分为两种：
      - 多模光纤 ： 里面可以多个不同角度的光线
      - 单模光纤： 只能传播一个光纤，适合长距离

#### 2.3.2 非导引型传输媒体

使用无线电波 传播

1. 高频 ——短波
2. 低频——长波

### 2.4 信道复用技术

#### 2.4.1 频分复用、时分复用和统计时分复用

##### 1. 频分复用FDM

频分复用的所有用户在同样的时间占用不同的带宽资源（频率带宽）

##### 2. 时分复用TDM

用户时分复用的所有用户是在不同的时间占用同样的频带宽度

![1568971029880](img/1568971029880.png)

缺点 ： 信道利用率不高，容易被占用

##### 3. 统计时分复用STDM

不是固定分配时隙，而是按需动态分配时隙，在每个时隙中还必须有用户的==地址信息==，这是统计时分复用必须要有的和不可避免的一些开销

#### 2.4.2 波分复用WDM ：就是光的频分复用

#### 2.4.3 码分复用CDM

### 2.5 数字传输系统

1. T1

   是指北美和日本的T1速率

2. E1 

   是指欧洲的E1速率

3. ==PCM的缺点：==

   1. 速率标准不统一
   2. 不是同步传输

### 2.6 宽带接入技术（有线宽带接入）

#### 2.6.1 ADSL 技术

非对称数组用户线ADSL技术使用数字技术对现有的模拟用户线进行改造，使它能够承载宽带数字业务

#### 2.6.2 光纤同轴混合网（HFC网）

就是有线电视

#### 2.6.3 FTTx技术



## （三）数据链路层

### 3.1 使用点对点信道的数据链路层

#### 3.1.1 数据链路和帧

1. 链路（link） 是 一条无源的点到点的物理线路段，中间没有任何其他的交换结点。
2. 数据链路（data link） 除了物理线路外，还必须有通信协议来控制这些数据的传输 。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路
3. 常常在两个对等的数据链路层之间画出一个数字管道，而在这条数字管道上传输的数据单位是帧

#### 3.1.2 基本问题（功能）

##### 1. 封装成帧

> 就是在一段数据的前后分别添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束

1. 帧是数据链路层的数据传送单元。首部和尾部==还包括许多必要的控制信息==
2. 每一种链路层协议都规定了所能传送的帧的数据部分长度上限——最大传送单元（MTU）
3. 一个控制字符SOH 放在帧的最前面，表示帧的开始。另一个控制字符EOT 表示帧的结束

##### 2. 透明传输

> ”在数据链路层透明传输数据“ 表示无论什么样的比特组合的数据都能通过这个数据链路层

1. ==当报文中出现多个SOH或者EOT或者ESC，解决办法==

   **==字节填充或字符填充==**

   解释： 在前面添加一个ESC 转义字符

##### 3. 差错检测

> 因为 网络通信不是理想状态下，比特会在传输过程中产生差错，1可能变成0,0可能变成1，——比特差错
>
> 而比特差错是传输差错中的一种

1. 传输错误的比特所占传输比特总数的比率称为**误码率BER**

2. 采用各种差错检测措施 ：：==循环冗余检验CRC==技术

3. ==循环冗余检验原理==

   1. 原理

      > 在数据链路层传送的帧中，广泛使用了循环冗余检验 CRC 的检错技术。
      >
      > 在发送端，先把数据划分为组。假定每组 k 个比特。
      >
      > 假设待传送的一组数据 M = 101001（现在 k = 6）。我们在 M 的后面再添加供差错检测用的 n 位冗余码一起发送。
      >
      
   2. 冗余码计算
   
      > 用二进制的模 2 运算进行 2n 乘 M 的运算，这相当于在 M 后面添加 n 个 0。
      >
      > 得到的 (k + n) 位的数除以事先选定好的长度为 (n + 1) 位的除数 P，得出商是 Q 而余数是 R，余数 R 比除数 P 少 1 位，即 R 是 n 位。 
      >
      > 将余数 R 作为冗余码拼接在数据 M 后面发送出去。
   
   3. 冗余码的计算实例
   
      ![1569040631630](img/1569040631630.png)
   
      ![1569040644933](img/1569040644933.png)
   
   4. 在接收端 对收到的每一帧经过CRC进行校验，
   
      1. 若得出的余数R=0，则判定这个帧没有差错，就接收
      2. 若余数R≠0，则判断这个帧出错（但是无法纠错）
   
   5. 循环冗余校验CRC和帧检验序列FCS并不相 同 
   
      1. 在数据后面添加上的冗余码称为帧检验序列 FCS 
      2. CRC 是一个方法
   
   6. **无差错接受**
   
      1. CRC只能判断正确和错误，对的接收，错的不要
   
   7. 在数据链路层使用 CRC 检验，能够实现无比特差错的传输，==但这还不是可靠传输==

##### 4. 流量控制（确认和重传机制）--不重要仅了解

发送端通过接收端 接收的反馈来判断  是否继续发或者重复发



### 3.2 点对点协议PPP

对于点对点的链路，简单得多的点对点协议PPP 是目前使用最广泛的数据链路层协议

PP协议 就是用户计算机和ISP进行通信时所使用的数据链路层协议

#### 3.2.1 PPP协议的特点

1. 简单
2. 封装成帧
3. 透明性
4. 多种网络层协议
5. PPP还必须能够在多种类型的链路上运行
6. 差错检测
7. 检测连接状态
8. 最大传送单元
9. 网络层协议协商
10. 数据压缩协商

##### 1. p2p协议的组成

1. 一个IP数据报封装到串行链路的方法
2. 一个用来建立，配置和测试数据链路连接的链路控制协议LCP
3. 一套网路控制协议NCP

#### 3.2.2 P2P协议的帧格式

##### 1. 各字段的意义

![1569134364703](img/1569134364703.png)

PPP 的真个是和HDLC的相似

![1569134388251](img/1569134388251.png)

##### 2. 字符填充问题

![1569134404899](img/1569134404899.png)

##### 3. 零比特填充

![1569134593411](img/1569134593411.png)

![1569134627768](img/1569134627768.png)





#### 3.2.3 ppp协议的工作状态

![1569134826814](img/1569134826814.png)



### 3.3 使用广播信道的数据链路协议

#### 3.3.1 局域网的数据链路层

局域网为一个单位所拥有，且地理范围和站点数据均有限

1. 具有广播工鞥
2. 便于系统的扩展和逐渐的演变，各设备的位置可灵活调整和改变
3. 提供了系统的可靠性，可用性和生存性

拓扑结构

1. 星型网
2. 总线网*
3. 环形网
4. 树形网

媒体共享技术

1. 静态划分信道
   1. 频分复用
   2. 时分复用
   3. 波分复用
   4. 码分复用
2. 动态媒体接入控制（多点接入）
   1. 随机接入：任意设备随意接入
   2. 受控接入：用户必须受到控制。如多点线路探寻

以太网（局域网）的两个标准

1. DIX Ethernet V2

2. IEEE 的802

   数据链路层的两个子层

   1. 逻辑链路控制LLC
2. 媒体接入控制MAC
   
3. 以太网发送的数据都使用曼彻斯特 (Manchester) 编码

适配器的作用

​	网络接口板就是通信适配器或网络接口卡NIC。 ——网卡（水晶头那个）

​	网卡的重要功能：

​		进行串行/并行转换

​		对数据进行缓存

​		在计算机的操作系统安装设备驱动程序

​		实现以太网协议

#### 3.3.2 CSMA/CD 协议

1. 广播发送方式
   1. 优点：
      1. 可以直接发送数据
      2. 数据帧不进行编号，不用对方发回确认
      3. 质量好
   2. 服务
      1. 不可靠的
      2. 么有重传
2. 载波监听多点接入/碰撞检测 
   1. 多点接入 ： 表示许多计算机以多点接入的方式连接在一根总线上
   2. 载波监听： 是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发送碰撞。
   3. 碰撞检测： 就是计算机边发送数据边检测信道上的信号电压大小
   4. 检测到碰撞后：每一个正在发送数据的站，一旦发现总线上出现了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送。
3. 特性：
   1. 因为碰撞，网速降低
4. 采用双向交替通信（半双工）

### 3.4 使用广播信道的以太网

#### 3.4.1 传统以太网

##### 1. MAC层连接方式

传统以太网可使用的传输媒体有四种：

​	铜缆（粗缆或细缆）

​	铜线 （双绞线）

​	光缆



##### 2. 以太网的连接距离

不是直连的，而是通过转发器，来连接的



##### 3. 集线器

是 使用电子器件来模拟实际电缆线的工作

集线器工作在 物理层，

![1569223575631](img/1569223575631.png)



####  3.4.2 以太网的信道利用率

![1569223597313](img/1569223597313.png)

![1569223641092](img/1569223641092.png)

![1569223792911](img/1569223792911.png)

a越小 越好

帧越长，时延带宽积就越小，利用率就越高

![1569223878650](img/1569223878650.png)



![1569223890833](img/1569223890833.png)





#### 3.4.3 以太网的MAC层

##### 1. 以太网的MAC地址

在局域网中，硬件地址又称为物理地址，也叫MAC地址

是通过IEEE802 标准的 48位的全球地址

![1569224471202](img/1569224471202.png)

路由器 ： 是同时连接两个网络上

他有 两块网卡，和两个硬件地址



网卡从网络上没收到一个MAC帧就首先用硬件检查MAC帧中的MAC地址

如果是发往本站的帧则收下，然后在进行其他处理。否则就将此帧丢弃，不在进行其他的处理

“发往本站的帧“ 包括以下三种帧：

单播（一对一） 广播（一对全体）多播（一对多）

##### 2. MAC帧格式

1. 两种标准

   ![1569224864551](img/1569224864551.png)

   ![1569224882262](img/1569224882262.png)

   fcs 校验序列

   要求

   ![1569225076382](img/1569225076382.png)

   > 在帧的前面插入（硬件生成）的 8 字节中，第一个字段共 7 个字节，是前同步码，用来迅速实现
   > MAC 帧的比特同步。第二个字段 1
   > 个字节是帧开始定界符，表示后面的信息就是 MAC
   > 帧。 

   ![1569225212929](img/1569225212929.png)

   

   ##### 3. 无效的MAC帧

   1. 帧的长度不是整数个字节
   2. 用收到的帧检验序列FCS查出有差错
   3. 收到的帧的MAC客户数据字段的长度不在64-1500字节之间。考虑到MAC帧首部和尾部的长度共有18字节，可以得出有效的MAC帧长度为64-1518字节之间。

   ##### 4. 帧间最小间隔

   帧间最小间隔9.6 毫秒，相当于96bit的发送时间



### 3.5 扩展的以太网

#### 3.5.1 在物理层扩展以太网

通过集线器 把各个 集线器，，然后组成一个大的局域网

##### 1. 优点：

使原来属于不同碰撞域的局域网上的计算机能够进行跨域碰域的通信，

扩大了局域网覆盖的地理范围

##### 2. 缺点：

碰撞域增大了，但总的吞吐量并未提供。

如果不同的碰撞域使用不同的数据率，就不能用集线器将他们互连起来

#### 3.5.2 在数据链路层扩展以太网

在==数据链路层扩展局域网==是使用==网桥==

还是使用MAC 帧，但是具有过滤的功能 

##### 1. 优点

过滤通信量

扩大了物理范围

提高了可靠性

可互连不同的物理层，不同的MAC子层和不同速率的局域网

##### 2. 缺点

存储转发增加了时延

在MAC子层==没有流量控制==功能

具有不同MAC子层的网段桥接在一起时延更大

网桥只适合于用户数不太多和通信量不太大的局域网，否则有时会因传播过多的广播信息，而产生网络拥塞。这就是所谓的==广播风暴==



##### 3. 网桥的运行过程

透明网桥使用了支撑树的算法，为了避免产生转发的帧在网络中不断地兜圈子



##### 4.  多端口网桥——==以太网交换机==

交换式集线器常称为 以太网交换机或第二层交换机 实质上就是一个多端口的网桥，

是运行在数据链路层

###### 1. 特点：

以太网交换机 是 全双工方式

无碰撞的传输数据

交换速率较高

1. 独占传输媒体的带宽



##### 5. 虚拟局域网VLan

![1569478855339](img/1569478855339.png)

虚拟局域网 VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组，而这些网段具有某些共同的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个 VLAN。

==虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。==



虚拟局域网协议允许在以太网的帧格式中==插入一个4字节的标识符==，称为 VLAN 标记 (tag)，用来指明发送该帧的计算机属于哪一个虚拟局域网。

#### 3.6 高速以太网

##### 3.6.1 100M以太网

使用802.3 标准和 CSMA/CD协议

##### 3.6.2 吉比特以太网

1Gb/s 下全双工和半双工两种方式工作

802.3标准

##### 1. 载波延伸

吉比特在使用半双工方式，必须进行碰撞检测

#### 2. 分组突发

当很多短帧要发送时，第一个短帧要采用上面的载波延伸的方法进行填充，随后的一些短帧 只要大考必要的帧间最小间隔即可，就可以一个个发送



##  （四） 网络层

####  4.1 网络层提供的服务

网络层 为接在网络上的主机所提供的的服务可以分为两大类：

 1.  无连接的网络服务（数据报服务）

      	1. 不需要建立一个独立的连接
      	2. 网络层向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务。‘
      	3. 即迅速又经济
      	4. 每个分组必须携带完整的地址信息

 2.  面向连接的网络服务（虚电路服务）

      	1. 需要建立 一个独立的连接（思路来源于传统的电信网）
      	2. 仅需要一个很简单的虚电路号码的标志
      	3. 没有分组转发

     

3. ![1569586620633](img/1569586620633.png)

   
   
#### 4.2 IP协议

   网际协议 IP 是 TCP/IP 体系中两个最主要的协议之一。

   与 IP 协议配套使用的还有三个协议：

1. 地址解析协议 ARP
       (Address Resolution Protocol)
2. 网际控制报文协议 ICMP
          (Internet Control Message Protocol)
3. 网际组管理协议 IGMP
          (Internet Group Management Protocol)
4. ![1569587074899](img/1569587074899.png)

##### 4.2.1 虚拟互联网络

将网络互相连接起来要使用一些中间设备。 

中间设备又称为中间系统或中继 (relay)系统。

有以下五种不同的中间设备：

    - 物理层中继系统：转发器 (repeater)。
    - 数据链路层中继系统：网桥 或 桥接器 (bridge)。
    - 网络层中继系统：路由器 (router)。
    - 网桥和路由器的混合物：桥路器 (brouter)。
    - 网络层以上的中继系统：网关 (gateway)。  



虚拟互联网的意义：

使用 IP 协议的虚拟互连网络可简称为 IP 网。

使用虚拟互连网络的好处是：

​		当互联网上的主机进行通信时，就好像在一个网络上通信一样，而看不见互连的各具体的网络异构细节。

如果在这种覆盖全球的 IP 网的上层使用 TCP 协议，那么就是现在的互联网 (Internet)。



##### 4.2.2 分类的IP地址

###### 1. IP地址及其表示方式

ip地址就是给每个连接在因特网上的主机分配一个在全世界是唯一的32bit的标识符

![1569588626922](img/1569588626922.png)

==分类IP地址==

![1569588650191](img/1569588650191.png)

![1569588691991](img/1569588691991.png)

![1569588700985](img/1569588700985.png)

1. 互联网中IP地址：

2. 

   - ![1569740266158](img/1569740266158.png)

   - ![1569740274183](img/1569740274183.png)

   - ![1569740282021](img/1569740282021.png)

   - ![1569740315218](img/1569740315218.png)

     

##### 4.2.3 IP地址与硬件地址

![1569740330441](img/1569740330441.png)

![1569740420258](img/1569740420258.png)

##### 4.2.4 地址解析协议

ARP 是解决同一个局域网上的主机或路由器的IP 地址和硬件地址的映射问题。

![1569741970486](img/1569741970486.png)

1. 特定主机路由：

   > 虽然互联网所有的分组转发都是基于目的主机所在的网络，但在大多数情况下都允许有这样的特例，即为特定的目的主机指明一个路由。
   > 采用特定主机路由可使网络管理人员能更方便地控制网络和测试网络，同时也可在需要考虑某种安全问题时采用这种特定主机路由。 

   
   
   
### 4.3 划分子网和构成超网

#####  4.3.1 划分子网

######  1. 两级IP地址到 三级IP地址

1. IP缺陷
   1.  IP地址空间的利用率有时很低
   2. 给每一个物理网络分配一个网络号会使路由表变得太大
   3. 两级IP地址不够灵活

![1570018576507](img/1570018576507.png)

 

######    2. 子网掩码

使用子网掩码可以找出IP地址的中的子网部分

![1570021947481](img/1570021947481.png)

![1570019300489](img/1570019300489.png)

![1570019394589](img/1570019394589.png)

![1570019518680](img/1570019518680.png)

![1570019619821](img/1570019619821.png)

##### 4.3.3 无分类编址(构成抄网)

######  IP编址问题的演讲

指明了 在一个划分子网的网络中，可同时使用几个不同的子网掩码

可以使用多个子网号

==无分类域间路由器CIDR== 

###### CIDR 最主要的特点

1. 消除了传统的A类，b类，c类地址 以及划分子网的概念
2. CIDR 把网络前缀都相同的连续的IP地址组成一个“CIDR地址块"

![1570106097742](img/1570106097742.png)

###### 路由聚合

![1570106452959](img/1570106452959.png)

![1570106759541](img/1570106759541.png)

![1570106885788](img/1570106885788.png)

###### 前缀最长匹配

![1570107242726](img/1570107242726.png)

![1570107349240](img/1570107349240.png)





######  使用二叉线索查找路由表

![1570107696042](img/1570107696042.png)

![1570107871563](img/1570107871563.png)

### 4.4 网际控制报文协议ICMP

![1570108169571](img/1570108169571.png)

![1570108178000](img/1570108178000.png)

##### ICMP报文

ICMP 报文的种类有两种，即 ICMP 差错报告报文和 ICMP 询问报文。


ICMP 报文的前 4 个字节是统一的格式，共有三个字段：即类型、代码和检验和。接着的 4 个字节的内容与 ICMP 的类型有关。 

![1570108319353](img/1570108319353.png)

还有一个 源站抑制



![1570108665870](img/1570108665870.png)

![1570108713233](img/1570108713233.png)

### 4.5 因特网的路由选择协议

##### 4.5.1 有关路由选择协议的几个基本概念

###### 1. 理想的路由算法

算法 必须是正确的和完整的

算法在计算上应简单

算法应能适应通信量和网络拓扑的，，要有自适应性

算法应具有稳定性

算法应是公平的

算法应是最佳的



###### 最佳路由

不存在一种绝对的最佳路由算法

最佳 只能是相对于某一种特定要求下得出的较为合理的选择而已



###### 从路由算法的自适应性考虑

1. 静态路由选择策略——不适应网络状态变化，但是较为简单，开销小
2. 动态路由选择策略——自适应路由选择，但是较为复杂，开销比较大

###### 2. 分层次的路由选择协议

因特网采用分层次的路由选择协议

###### 自治系统

因特网将整个互联网划分为许多较小的自治系统AS

是由多个局域网组成的叫做自治系统

###### 因特网由两大类路由选择协议

1. 内部网关协议IGP——自治系统内使用的，具体的协议：RIP和OSPF
2. 外部网关协议EGP——多个自治系统间使用的，具体协议：EGP

##### 4.5.2 内部网关协议RIP

1. RIP 是一种==分布式==的机遇距离向量的路由选择协议

###### 距离的定义

从一路由器到直接连接的网络的距离定义为1

从一个路由器到非直接连接的网络的距离定义为所经过的路由器数加 1



RIP 允许一条路径最多只能包含15个路由器

所以，只能适用于小型互联网



###### RIP 协议的三个要点

1. 仅和相邻路由器交换信息
2. 交换的信息是当前本路由器所知道的全部信息，即自己的路由表
3. 按固定的时间间隔交换路由信息，例如间隔30秒

###### 路由表的定义

连接的路由器是有限的，

路由表有任何连接路由器的最短距离

如果存在路由器损坏，那么把只要经过这个路由器的线路距离都设为16

###### RIP 协议的位置

是使用运输层的用户数据报UDP 进行传送，端口520

因此RIP 协议的位置应当在应用层



##### 4.5.3 内部网关协议OSPF

OSPF 协议 是公开发表的

SPF 是最短路径优先

采用分布式的链路状态协议 

==注意==：OSPF 只是一个协议的名字，它并不表示其他的路由选择协议不是“最短路径优先”。

![1570278998901](img/1570278998901.png)

###### 链路状态数据库

![1570279137067](img/1570279137067.png)



###### OSPF 的区域

![1570279214746](img/1570279214746.png)

###### OSPF 划分区域

![1570279556012](img/1570279556012.png)

###### OSPF 的其他特点 

![1570279591638](img/1570279591638.png)

######  OSPF 的五种分组类型

![1570280138354](img/1570280138354.png)

######  OSPF 的其他特点

==OSPF 不用 UDP 而是直接用 IP 数据报传送==

![1570280956141](img/1570280956141.png)

###### 指定的路由器

![1570281015123](img/1570281015123.png)

###### OSPF支持的三种网络的连接

1. 两个路由器之间的点对点连接
2. 具有广播功能的局域网
3. 无广播功能的广域网





###### 网络拓扑的表现形式

1.  有向图
2. 最短路径树



##### 4.5.4 外部网关协议BGP

###### 使用环境

BGP 是不同自治系统的路由器之间交换路由信息的协议

![1570281346657](img/1570281346657.png)

###### BGP交换路由信息

每一个自治系统的管理员要选择至少一个路由器作为该自治系统的“ BGP 发言人” (BGP speaker) 

==使用的是TCP协议==



![1570281521587](img/1570281521587.png)



###### BGP发言人交换路径向量

只有上下层进行交互

![1570281629946](img/1570281629946.png)

###### BGP协议的特点：

![1570281758749](img/1570281758749.png)

![1570281892741](img/1570281892741.png)

###### BGP-4 共使用四种报文

![1570281901247](img/1570281901247.png)

### 4.6 IP多播

##### 4.6.1 IP多播的基本概念

在因特网上进行多播就叫做IP多播

多播数据报和一般的IP数据报的区别就是它使用D类IP地址作为目的地址，并且首部中的协议字段值是2，表明使用网际组管理协议IGMP

**多播地址只能使用用于==目的地址==，而不能用于源地址**



##### 4.6.2 在局域网上进行硬件多播

以太网硬件地址字段中的第一字节的最低位为 1 时即为多播地址



##### 4.6.3 网际组管理协议IGMP和多播路由选择协议

###### 1. IP多播两种协议

需要网际组管理协议IGMP 和多播路由选择协议

1. 多播路由选择协议

   只需要看网络号，不需要看主机号



###### 2. IGMP的两个阶段

1. 第一阶段 ： 当某个主机要加入新的多播组时，该主机要向多播组的多播地址发送IGMP报文， 如果在，不管，不管在加进来，并且向其他路由器发送组成员关系 
2. 第二个阶段： **只要对某个组有一个主机响应，那么多播路由器就认为这个组是活跃的，但是一个组经过几次的探寻仍然没有主机响应，则不再将该组的成员关系转发到其他的多播路由器



###### 3. 多播路由选择协议

1. 转发多播数据报时使用的方法
   1. 泛洪与剪裁
   2. 隧道技术：适用于地理上很分散的情况
   3. 基于核心的发现技术



##### 4.7 虚拟专用网VPN和网络地址转换NAT

###### 4.7.1 虚拟专用网VPN

![1570374864933](img/1570374864933.png)

采用这样的专用 IP 地址的互连网络称为专用互联网或本地互联网，或更简单些，就叫做专用网。

###### 4.7.2 网络转换协议NAT

![1570376135534](img/1570376135534.png)





## （五）运输层

### 5.1 运输层协议概述

从通信和信息处理的角度看，运输层向它上面的应用层提供通信服务，它属于面向通信部分的最高层，同时也是用户功能中的最低层。

#### 5.1.1 进程间的通信

运输层为相互通信的应用进程提供了逻辑通信

###### 运输层协议和网络层协议的主要区别：

运输层是为主机之间提供逻辑通信，而运输层为应用进程之间提供端对端的逻辑通信。

#### 5.1.2 运输层的两个主要协议

运输层需要有两种不同的运输协议，即面对面连接的TCP和无连接的UDP

######  运输层向上提供可靠的和不可靠的逻辑通信信道

UDP：简单，快

	1. 无连接
 	2. 无确认
 	3. 不可靠

TCP：

	1. 可靠的
 	2. 面向连接

#### 5.1.3 运输层的端口

端口就是运输层服务访问点TSAP

###### 两类端口

1. 熟知端口： 0到1023 
2. 一般端口：随即分配的

###### 插口

TCP 使用连接 （端口） 作为最基本的抽象，同时将TCP连接的端口作为插口，或套接字、套接口

插口和端口、IP地址的关系是：

插口=  IP地址  :   端口号

### 5.2 用户数据报协议

#### 5.2.1 UDP概述

1. 无连接的
2. 使用尽最大努力交付方式，不保证可靠交付
3. 面向报文的
4. 没有拥塞空值
5. 支持一对一，一对多，多对一，多对多交互通信
6. 首部开销小，只有8个字节，只有差错检验和复用和分用的功能



UDP 的首部格式 ： 

1. 源端口  
2. 目的端口
3. 长度
4. 检验和

### 5.3  传输控制协议TCP概述

#### 5.3.1 TCP最主要的特点

1. 面向连接
2. 每一条TCP连接只能有两个端点，每一条TCP连接只能是点对点的
3. 提供可靠交付
4. 提供全双工通信
5. 面向字节流



### 5.4 可靠传输的工作原理

由于IP层只能提供尽最大努力服务，也就是说所提供的是不可靠的传输，所以TCP需要 采用适当的措施，才能使的两个传输层之间变得可靠

#### 5.4.1 停止等待协议

就是 每发送完一个分组，必须等到回复，再发送下一个

##### 1. 无差错情况

![1570546734109](img/1570546734109.png)

没有收到回复，就会重传，（超时重传机制）

##### 2. 出现差错

##### 3. 确认丢失和确认迟到

##### 4. 信道利用率



#### 5.4.2 连续ARQ协议

### 5.5 TCP 报文段的首部部分

一个TCP报文段分为首部和数据两部分，而TCP的全部功能都体现在它首部中各字段的作用

而首部的前20个字节是固定的 ，后面有4n字节是根据需要增加的，

### 5.6 TCP可靠传输的实现

TCP 是 面向字节的，TCP 将所要传送的报文看成是字节组成的数据流

#### 5.6.1 以字节为单位的滑动窗口

tcp 采用大小可变的滑动窗口进行流量控制。窗口大小的单位是字节

![1570604285632](img/1570604285632.png)

![1570604303474](img/1570604303474.png)

![1570604464780](img/1570604464780.png)

![1570604886335](img/1570604886335.png)

![1570604899717](img/1570604899717.png)

#### 5.6.2 超时重传时间的选择

重传时间的选择是 TCP 最复杂的问题之一。

TCP 采用了一种自适应算法

TCP 保留了 RTT 的一个加权平均往返时间 RTTS（这又称为平滑的往返时间）。

![1570605244465](img/1570605244465.png)

#### 5.6.3 选择确认SACK

### 5.7 TCP 的流量控制

##### 5.7.1 利用滑动窗口实现流量控制

流量控制就是让 发送方发送速率不要太快，要让接收方来得及接收

##### 5.7.2 必须考虑传输速率

控制TCP报文段的发送时机

1. 第一种机制 是TCP 维持一个变量，它等于最大报文段长度MSS
2. 第二种机制 是 由发送方的应用程序指明要求发送报文段，即TCP支持的推送
3. 第三种机制是发送方的一个计时器期限到了，这时就把当前已有的缓存数据装入报文段（但长度不能超过 MSS）发送出去。

###### Nagle算法



###### 糊涂窗口综合征

==解决方法==：让接收方等待一段时间，使得或者接收缓存已有足够空间容纳一个最长的报文段，或者等到接收缓存已有一半空闲的空间。只要出现这两种情况之一，接收方就发出确认报文，并向发送方通知当前的窗口大小。

### 5.8 TCP 的拥塞控制

在计算机网络中的链路容量（即带宽），交换结点中的缓存和处理机等，都是网络资源

在某段时间，若对网络中的某一资源的需求超过该资源所能提供的可用部分，网络的性能就要变坏，这种情况就叫拥塞

###### 拥塞控制和流量控制

拥塞控制 ： 就是防止过多的数据注入到网络中

流量控制： 就是抑制发送端发送数据的速率，以便使接收端来得及接收

![1570627529139](img/1570627529139.png)

![1570627622647](img/1570627622647.png)

###### 闭环控制措施

1. 监测网络系统以便监测到拥塞在何时何处发生
2. 把拥塞发生的信息传送到可采取行动的地方
3. 调整网络系统的运行以解决出现的问题

#### 5.8.2 几种拥塞控制方法

1. 慢开始和拥塞避免

   发送端的主机在确定发送报文段的速率时，既要根据接收端的接收能力，又要从全局考虑要使网络发生拥塞

   TCP 拥有两个 变量 ： 接收端窗口rwnd，拥塞窗口cwnd

   ![1570628191188](img/1570628191188.png)

   ![1570628212304](img/1570628212304.png)

   ![1570628222718](img/1570628222718.png)

   2. 快重传和快恢复

### 5.9 TCP的运输连接管理

![1570680292397](img/1570680292397.png)

###### 客户服务器方式

TCP 的连接和建立都是采用客户服务器方式

主动发起的叫 客户

被动等待的叫 服务器

#### 5.9.1 用三次握手建立TCP连接

![1570680320555](img/1570680320555.png)

![1570680334427](img/1570680334427.png)

![1570680350829](img/1570680350829.png)

![1570680388530](img/1570680388530.png)

#### 5.9.2 TCP 的链接释放

一共四步

![1570680626868](img/1570680626868.png)

![1570680635781](img/1570680635781.png)

![1570680646414](img/1570680646414.png)

![1570680665333](img/1570680665333.png)

![1570680675604](img/1570680675604.png)

![1570680689517](img/1570680689517.png)

#### 5.9.3 TCP 的有限状态机

## （六） 应用层

### 6.1 域名系统

#### 6.1.1 域名系统概述

因特网采用层次结构的命名树作为主机的名字，并使用分布式的域名系统DNS

#### 6.1.2 因特网的域名结构

因特网采用层次树状结构的命名方法

域名 ： 任何一个连接在因特网上的主机或路由器，都有一个唯一的层次结构的名字

![1570796115384](img/1570796115384.png)

![1570796145528](img/1570796145528.png)

![1570796153477](img/1570796153477.png)

![1570796161793](img/1570796161793.png)

#### 6.1.3 域名服务器

![1570796459148](img/1570796459148.png)

###### 域名服务器分类：

1. 根域名服务器
2. 顶级域名服务器
3. 权限域名服务器
4. 本地域名服务器

是==递归查询==的

###### 名字的高速缓存

使用这个可优化查询的开销，

提高域名解析的速度

### 6.2 文件传输协议

#### 6.2.1 FTP概述

只能进行==文件传输==的作用

#### 6.2.2 FTP 的基本工作原理

###### 网络环境下复制文件的复杂性：

1. 计算机存储数据格式不同
2. 目录结构和命名规定不同
3. 不同的操作系统
4. 访问控制方法不同

###### FTP特点：

1. 使用TCP可靠的运输服务
2. 减少或消除不同操作系统的不兼容性
3. 可以同时为多个客户进程提供服务
4. 两大部分组成：一个主进程，若干个从属进程

###### 主进程的工作步骤

![1570797374363](img/1570797374363.png)

###### 两个连接

![1570797483304](img/1570797483304.png)

![1570797627205](img/1570797627205.png)



###### 两个不同的端口号

![1570797612812](img/1570797612812.png)

![1570797683867](img/1570797683867.png)

#### 6.2.3 简单文件传送协议TFTP

简单的文件传送协议 一个很小且易于实现的文件传送协议

![1570857863791](img/1570857863791.png)

TFTP 特点：

![1570857812353](img/1570857812353.png)

### 6.3 远程终端协议TELNET

###### 客户服务器方式

![1570858159165](img/1570858159165.png)

###### TELNET 使用网络虚拟终端NVT格式



### 6.4 万维网WWW

#### 6.4.1 万维网概述

万维网是一个大规模的，联机式的信息储存所

万维网用链接的方法能非常方便地从互联网上的一个站点访问另一个站点，从而主动地按需获取丰富的信息。

###### 万维网提供分布式服务



###### 超媒体与超文本

![1570858465663](img/1570858465663.png)

###### 万维网的工作方式

![1570858526686](img/1570858526686.png)

###### 万维网必须解决的问题

![1570858574310](img/1570858574310.png)

![1570858584221](img/1570858584221.png)

![1570858591806](img/1570858591806.png)

![1570858599440](img/1570858599440.png)

#### 6.4.2 统一资源定位符URL

##### 1. URL的格式

唯一标识一个主页

![1570858727235](img/1570858727235.png)

#### 6.4.3超文本传送协议HTTP

##### 1. HTTP的操作流程

为了使超文本的连接能够高效率的完成，需要用HTTP协议来传送一切必须的信息

HTTP 是面向事务的，

###### 万维网的工作流程

![1570859020656](img/1570859020656.png)

![1570859183587](img/1570859183587.png)



##### 2. 代理服务器

###### 使用高速缓存可减少访问因特网服务器的时延





##### 4. HTTP的报文结构

![1570859425104](img/1570859425104.png)

![1570859516572](img/1570859516572.png)

###### 状态码三位数字

![1570859668982](img/1570859668982.png)

##### 5. 在服务器上存放用户信息

使用Cookie 来跟踪用户，





##### 6. 通用网关接口CGI

![1570969431899](img/1570969431899.png)

##### 7、 活动万维网文档

![1570969663551](img/1570969663551.png)

### 6.5 电子邮件

#### 6.5.2 简单邮件传送协议SMTP

只负责发送

###### POP和IMAP 是负责接收的



### 6.6 动态主机配置协议DHCP

连接到 因特网的计算机 的协议软件需要配置 的项目

	1. IP地址
 	2. 子网掩码
 	3. 默认路由器的IP地址
 	4. 域名服务器的IP地址

###### DHCP 使用客户服务器方式





###### DHCP 中继代理

不是每一个网络都配置一个DHCP 服务器，是每一个网络 配置中继代理服务器，将信息，转发给真的DHCP的服务器

### 6.7 简单网络管理协议SNMP

#### 6.7.1 网络管理的基本概念

是对 硬件、软件和人力的使用、综合与协调，，是以合理的价格满足网络的一些需求



###### OSI 的五个管理功能于

1. 故障管理
2. 配置管理
3. 计费管理
4. 性能管理
5. 安全管理



#### 6.7.2 管理信息结构SMI

功能 ： 

1. 被管对象应怎样命名
2. 用来存储被管对象的数据类型有哪些种
3. 在网络上传送的管理数据应如何编码

### 6.8 应用进程跨越网络的通信

## （七） 网络安全

### 7.1 网络安全概述

#### 7.1.1 计算机网络面临的安全威胁

###### 面临四种威胁

1. 截获 ： 被动攻击
2. 中断：主动攻击
3. 篡改：主动攻击
4. 伪造：主动攻击
5. 被动攻击 —— 只是 观察和分析数据单元，不干扰信息流
6. 主动攻击——更改保温刘，拒绝报文服务，伪造连接初始化

###### 计算机网络通信安全的目标

1. 防止分析出报文内容
2. 防止通信量分析
3. 检测更改报文流
4. 检测拒绝报文服务
5. 检测未做初始化连接

###### 恶意程序

1. 计算机病毒
2. 计算机蠕虫
3. 特洛伊木马
4. 逻辑炸弹

#### 7.1.2 计算机网络安全的内容



#### 7.1.3 一般的数据加密模型



### 7.2 两类密码体制

#### 7.2.1 对称密钥密码体制

是 加密密钥和解密密钥 是相同的体制

###### DES

数据加密标准DES 的实际密钥长度是 64位





### 7.3 数字前面

###### 数字签名必须保证以下三点：

1. 接收者能够核实发送者对报文的签名
2. 发送者事后不能抵赖对报文的签名
3. 接收者不能伪造对报文的签名





## （八） 互联网行的音频和视频服务

传送 音频/视频文件，以前是UDP 现在是TCP

### 1. RTP、RTCP、Qos等的概念

1. RTP ： 实时传输协议
2. RTCP：实时流式协议 ： 它本身不传送数据，是一个多媒体播放控制协议，用来使用户在播放从互联网下载的实时数据能够进行控制
3. Qos ： 服务质量

### 2.  时延、时延抖动等的处理

### 3. WLan、WPan、WMan、WLL的概念

1. WLAN ： 无线局域网，**却是同时为许多用户服务的无线局域网，它是一个大功率、中等范围、高速率的局域网**
2. WPAN ： 无线个人区域网 ，**以个人为中心来使用的无线人个区域网，它实际上就是一个低功率、小范围、低速率和低价格的电缆替代技术**：
3. WMAN ： 无线城域网，**在许多情况下，无线城域网可用来代替现有的有线宽带接入，**

### 4. 无线局域网的DCF和PCF

1. PCF ： 点协调功能
2. PCF ：分布协调功能

### 5. CSMA/CA协议的原理

CSMA/ca(碰撞避免功能)

![1571041092625](img/1571041092625.png)

![1571041116490](img/1571041116490.png)

## （九） 下一代因特网

### 1. IPv6的特点

1. 更大的地址空间
2. 扩展的地址层次结构
3. 灵活的首部格式
4. 改进的选项

### 2. P2P技术的特点
### 3. 标记交换原理

### 4.  MPLS的封装

MPLS : 多协议标记交换

MPLS 首部 ，是处在 第二层和第三层之间

### 5.  标记分配的方式
### 6. 与以路由器作为核心网络平台的技术相比，MPLS的主要优点

![1571041564214](img/1571041564214.png)



### 7.  Intserv的局限性

Intserv 综合服务： 可对单个的应用会话提供服务质量的保证

特点：

	1. 资源预留
 	2. 呼叫建立

存在的问题： 

1.  状态信息的数量与流的数目成正比
2. IntServ体系结构复杂
3. 综合服务IntServ所定义的服务质量等级数量太少，不够灵活

### 8. DiffServ的体系结构

DiffServ 是区分服务 

体系结构： 

1. DiffServ 力图不改变网络的基础结构，但在路由器中增加区分服务的功能
2. 网络被划分为许多个DS域
3. 边界路由器中的功能较多，可分为： 分类器和通信量调节器
4. DiffServ 提供 一种==聚合==功能

### 9. DiffServ的技术特点

![1571042003943](img/1571042003943.png)
